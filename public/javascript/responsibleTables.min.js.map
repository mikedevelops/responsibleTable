{"version":3,"sources":["responsibleTables.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","ResponsibleTable","options","this","defaults","activeClass","columnHeadingClass","containerSelector","subHeadingClass","tableDataClass","tableSelector","extendDefaults","originalTables","slice","call","document","querySelectorAll","containers","columnHeadings","cache","original","responsible","init","value","map","table","index","push","outerHTML","fragment","createDocumentFragment","rows","columns","children","innerHTML","appendChild","buildFirstRow","buildTableData","parentNode","removeChild","querySelector","classList","add","bind","firstCell","firstRow","createElement","thisCell","setAttribute","thisFragment","cells","thisRow","thisHeading","prop","hasOwnProperty"],"mappings":"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","file":"responsibleTables.min.js","sourcesContent":["class ResponsibleTable {\n    constructor (options) {\n        // defaults\n        this.defaults = {\n            activeClass: 'responsibleTable--active',\n            columnHeadingClass: 'responsibleTable__column-heading',\n            containerSelector: '.container',\n            subHeadingClass: 'responsibleTable__sub-heading',\n            tableDataClass: 'responsibleTable__table-data',\n            tableSelector: '.responsibleTable'\n        }\n\n        this.extendDefaults(options, this.defaults);\n\n        // vars\n        this.originalTables = [].slice.call(document.querySelectorAll(this.defaults.tableSelector));\n        this.containers = [].slice.call(document.querySelectorAll(this.defaults.containerSelector));\n        this.columnHeadings = [];\n\n        // cache\n        this.cache = {\n            original: [],\n            responsible: []\n        };\n\n        // init\n        this.init();\n    }\n\n    // initiate & build\n    init () {\n        this.originalTables.map(function (table, index) {\n            this.cache.original.push(table.outerHTML);\n\n            var fragment = document.createDocumentFragment();\n            // -1 to account for th\n            var rows = table.querySelectorAll('tr');\n            var columns = rows[0].children;\n\n            // build referecne to column headings\n            for (var i = 0; i < columns.length; i++) {\n                this.columnHeadings.push(columns[i].innerHTML);\n            }\n\n            fragment.appendChild(this.buildFirstRow(table));\n\n            // loop through rows excluding the first and build out the data\n            for (var i = 1; i < rows.length; i++) {\n                fragment.appendChild(this.buildTableData(table, i));\n            }\n\n            // remove original first row\n            rows[0].parentNode.removeChild(rows[0]);\n\n            // append fragment to container\n            table.querySelector('tbody').appendChild(fragment);\n            table.classList.add(this.defaults.activeClass);\n\n            // cache new table\n            this.cache.responsible.push(table.outerHTML);\n        }.bind(this));\n    }\n\n    // first row will be first th\n    buildFirstRow (table, fragment) {\n        // this might not be a th, fix that\n        var firstCell = table.querySelector('th');\n        var firstRow = document.createElement('tr');\n        var thisCell = document.createElement('th');\n\n        thisCell.innerHTML = firstCell.innerHTML;\n        thisCell.setAttribute('colspan', 2);\n        firstRow.appendChild(thisCell);\n\n        return firstRow;\n    }\n\n    buildTableData (table, index) {\n        var thisFragment = document.createDocumentFragment();\n        var rows = table.querySelectorAll('tr');\n        var firstRow = document.createElement('tr');\n        // replace 1 for i when looping though rows\n        var cells = rows[index].querySelectorAll('td');\n        var firstCell = cells[0];\n\n        // append first cell as data heading\n        firstCell.setAttribute('colspan', 2);\n        firstCell.classList.add(this.defaults.subHeadingClass);\n        firstRow.appendChild(firstCell);\n        thisFragment.appendChild(firstRow);\n\n        // loop through each column exluding first and\n        // populate data\n        for (var i = 1; i < cells.length; i++) {\n            var thisRow = document.createElement('tr');\n            var thisHeading = document.createElement('td');\n\n            thisHeading.innerHTML = this.columnHeadings[i];\n\n            // TODO: this might not be a 'th', fix that\n            thisHeading.classList.add(this.defaults.columnHeadingClass);\n            thisRow.appendChild(thisHeading);\n            cells[i].classList.add(this.defaults.tableDataClass);\n            thisRow.appendChild(cells[i]);\n            thisFragment.appendChild(thisRow);\n        }\n\n        return thisFragment;\n    }\n\n    restore () {\n        this.originalTables.map(function (table, index) {\n            table.outerHTML = this.cache.original[index];\n        }.bind(this));\n    }\n\n    extendDefaults (options, defaults) {\n        if (typeof options === 'object') {\n            for (var prop in options) {\n                if (defaults.hasOwnProperty(prop)) {\n                    defaults[prop] = options[prop];\n                }\n            }\n        }\n    }\n}\n"],"sourceRoot":"/source/"}